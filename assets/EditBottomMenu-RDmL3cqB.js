import{G as C,aQ as y,l as x,j as u}from"./index-BGXO2lPp.js";import{c as I,e as m,P as p}from"./InvoiceStatus-BYFB8oeg.js";import{C as E}from"./CancelButton-DCVx1bk1.js";import{M as b,c as g,i as w}from"./defaultValues-DzdHoEjO.js";import{u as v}from"./SlidingMenu-CJAihzrY.js";import{a as S}from"./utilityFunctions-BAfcw2Vo.js";import{u as j}from"./useMutation-DS9AGViE.js";import"./editPageStyles-SK7J9V0i.js";import"./create-visual-element-D1gbSJ56.js";const U=()=>{const[o]=j(y,{update:(e,{data:{editInvoice:t}})=>{e.writeQuery({query:C,variables:{getInvoiceById:t.id},data:{getInvoiceById:t}})},onError:e=>{console.error(e)}});return{handleUpdateInvoice:async e=>{try{await o({variables:{...e}})}catch(t){console.error(t)}}}},O=()=>{const{id:o}=x(),{startDate:s,setIsNewInvoiceOpen:e,selectedPaymentOption:t,methods:a,setIsCacheActive:n}=I(),r=v("cachedEditForm"),{trigger:i}=a,{handleUpdateInvoice:c}=U();return{onSubmitUpdate:async h=>{if(await i()){const d=S(h,s,t);d.id=String(o),d.status="pending";try{await c(d),r.clearCache(),n(!1),e(!1)}catch(f){console.error(f)}}}}};function T({saveText:o,closeText:s,justifyCancel:e}){const{reset:t}=m(),{setIsNewInvoiceOpen:a,setIsCacheActive:n}=I(),r=v("cachedEditForm"),i=()=>{a(!1),r.clearCache(),n(!1),t(w)},{handleSubmit:c}=m(),{onSubmitUpdate:l}=O();return u.jsxs(b,{children:[u.jsx(E,{handleClick:i,text:s,justifySelf:e}),u.jsx(g,{type:"button",value:o,onClick:c(l)})]})}T.propTypes={saveText:p.string.isRequired,closeText:p.string.isRequired};export{T as default};
